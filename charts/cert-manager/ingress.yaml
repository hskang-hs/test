apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: cafe-ingress-uri
  namespace: default
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt"
    cert-manager.io/acme-challenge-type: http01
spec:
  ingressClassName: nginx
  tls:
  - hosts:

      # 자신의 도메인 입력
    - nkp.neteer.co.kr
    secretName: cafe-secret
  rules:
  - host: nkp.neteer.co.kr
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: web-service-nkp-proxy
            port:
              number: 80

---

# default 네임스페이스에 등록 (프록시 역할)
apiVersion: v1
kind: Service
metadata:
  name: web-service-nkp-proxy
  namespace: default
spec:
  type: ExternalName
  externalName: web-service-nkp.web-service.svc.cluster.local
  ports:
    - port: 80
      targetPort: 80
